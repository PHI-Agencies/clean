<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZakaSania | Excellence en Propret√©</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- NAVIGATION & MENU TOGGLE --- */
        .header-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 5%;
            position: fixed;
            width: 100%;
            top: 0;
            background: white;
            z-index: 2000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .menu-toggle {
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 5px;
            z-index: 3000;
        }

        .menu-toggle span {
            display: block;
            width: 28px;
            height: 3px;
            background: #2f3640;
            border-radius: 3px;
            transition: 0.3s;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            position: fixed;
            top: 0;
            right: -100%;
            width: 280px;
            height: 100%;
            background: #1e272e;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 2500;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            box-shadow: -5px 0 15px rgba(0,0,0,0.3);
        }

        .sidebar.active { right: 0; }
        .sidebar-content { padding-top: 100px; }
        .sidebar ul { list-style: none; padding: 0; }
        .sidebar ul li { padding: 10px 30px; }
        .sidebar ul li a {
            color: white;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 600;
            transition: 0.3s;
        }
        .sidebar ul li a:hover { color: #00a8ff; padding-left: 10px; }

        .sidebar-footer {
            padding: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }

        .btn-close-menu {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 15px;
            border-radius: 15px;
            width: 100%;
            cursor: pointer;
            font-family: inherit;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            transition: 0.3s;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            z-index: 2400;
        }
        .overlay.active { display: block; }

        /* --- OVERLAY D'INSCRIPTION & CONNEXION --- */
        .auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .auth-modal {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            font-family: 'Poppins', sans-serif;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        .auth-modal h2 { margin-bottom: 10px; font-size: 1.5rem; }
        .auth-modal span { color: #00a8ff; }
        .auth-modal input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border-radius: 12px;
            border: 1px solid #ddd;
            outline: none;
            font-family: inherit;
        }

        .btn-auth {
            width: 100%;
            background: #00a8ff;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 15px;
        }

        .toggle-link {
            margin-top: 20px;
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .toggle-link b {
            color: #00a8ff;
            cursor: pointer;
            text-decoration: underline;
        }

        /* --- ASSISTANT FLOTTANT --- */
        .ai-floating-button { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
        .ai-btn {
            display: flex; align-items: center; gap: 10px;
            background: #1e272e; color: white; text-decoration: none;
            padding: 12px 20px; border-radius: 50px; font-weight: 600;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); transition: 0.3s;
            border: 1px solid #00a8ff;
        }
    </style>
</head>
<body>

    <div id="auth-overlay" class="auth-overlay">
        <div class="auth-modal">
            <h2 id="auth-title">Bienvenue chez <span>ZakaSania</span></h2>
            <p id="auth-desc">Enregistrez-vous pour acc√©der √† nos services.</p>
            
            <form id="authForm">
                <input type="text" id="userName" placeholder="Votre Nom d'utilisateur" required>
                <input type="tel" id="userPhone" placeholder="Votre num√©ro WhatsApp" required>
                <button type="submit" id="authBtn" class="btn-auth">Commencer</button>
            </form>

            <p class="toggle-link" id="auth-toggle-text">
                D√©j√† inscrit ? <b onclick="toggleAuthMode()">Connectez-vous ici</b>
            </p>
        </div>
    </div>
    
    <header class="header-nav">
        <div class="logo">Zaka<span>Sania</span></div>
        <div class="menu-toggle" id="mobile-menu">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </header>

    <nav class="sidebar" id="sidebar">
        <div class="sidebar-content">
            <ul>
                <li><a href="#accueil" onclick="closeMenu()">Accueil</a></li>
                <li><a href="#services" onclick="closeMenu()">Nos Services</a></li>
                <li><a href="avis.html">Avis Clients ‚≠ê</a></li>
                <li><a href="assistant.html" style="color: #00a8ff;">Assistant IA ‚ú®</a></li>
            </ul>
        </div>
        <div class="sidebar-footer">
            <button onclick="closeMenu()" class="btn-close-menu">
                <span style="color:white">‚Üê Retour</span>
            </button>
        </div>
    </nav>

    <div class="overlay" id="overlay" onclick="closeMenu()"></div>

    <main>
        <section id="accueil" class="hero" style="padding-top: 120px;">
            <div class="hero-content">
                <h1>Une maison saine, <br>un esprit serein avec <span>ZakaSania</span></h1>
                <p>Le meilleur du nettoyage professionnel au Burkina Faso.</p>
                <a href="#services" class="btn-main">D√©couvrir nos services</a>
            </div>
        </section>

        <section id="services" class="container">
            <h2 class="section-title">Quel service recherchez-vous ?</h2>
            <div class="services-grid">
                <a href="a.html" class="service-block-link">
                    <div class="icon">üß∫</div>
                    <h3>Lessive</h3>
                    <p>V√™tements, linge de maison et repassage.</p>
                    <div class="action-btn">Commander</div>
                </a>
                <a href="b.html" class="service-block-link">
                    <div class="icon">üè†</div>
                    <h3>Maisons & Locaux</h3>
                    <p>Entretien complet et fin de chantier.</p>
                    <div class="action-btn">Commander</div>
                </a>
                <a href="c.html" class="service-block-link">
                    <div class="icon">üçΩÔ∏è</div>
                    <h3>Cuisine & Vaisselle</h3>
                    <p>Nettoyage approfondi et aide m√©nag√®re.</p>
                    <div class="action-btn">Commander</div>
                </a>
                <a href="d.html" class="service-block-link">
                    <div class="icon">‚ú®</div>
                    <h3>Autres</h3>
                    <p>Demandes sp√©cifiques et sur-mesure.</p>
                    <div class="action-btn">Commander</div>
                </a>
            </div>
        </section>
    </main>

    <div class="ai-floating-button">
        <a href="assistant.html" class="ai-btn">
            <span>‚ú®</span>
            <span>Assistant IA</span>
        </a>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 ZakaSania - Services de Nettoyage Professionnel.</p>
        </div>
    </footer>

    <script>
        // --- LOGIQUE D'AUTH (INSCRIPTION / CONNEXION) ---
        const authOverlay = document.getElementById('auth-overlay');
        const authForm = document.getElementById('authForm');
        const userNameInput = document.getElementById('userName');
        const authTitle = document.getElementById('auth-title');
        const authDesc = document.getElementById('auth-desc');
        const authBtn = document.getElementById('authBtn');
        const authToggleText = document.getElementById('auth-toggle-text');

        let isLoginMode = false;

        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            if (isLoginMode) {
                authTitle.innerHTML = "Heureux de vous <span>revoir</span>";
                authDesc.innerText = "Entrez votre num√©ro WhatsApp pour vous connecter.";
                userNameInput.style.display = "none";
                userNameInput.required = false;
                authBtn.innerText = "Se connecter";
                authToggleText.innerHTML = "Nouveau ici ? <b onclick='toggleAuthMode()'>Cr√©ez un compte</b>";
            } else {
                authTitle.innerHTML = "Bienvenue chez <span>ZakaSania</span>";
                authDesc.innerText = "Enregistrez-vous pour acc√©der √† nos services.";
                userNameInput.style.display = "block";
                userNameInput.required = true;
                authBtn.innerText = "Commencer";
                authToggleText.innerHTML = "D√©j√† inscrit ? <b onclick='toggleAuthMode()'>Connectez-vous ici</b>";
            }
        }

        window.addEventListener('load', () => {
            if (!localStorage.getItem('zakaUser')) {
                authOverlay.style.display = 'flex';
            }
        });

        authForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('authBtn');
            const name = userNameInput.value;
            const phone = document.getElementById('userPhone').value;

            btn.innerText = "V√©rification...";
            btn.disabled = true;

            // D√©terminer l'URL selon le mode
            const endpoint = isLoginMode ? '/api/login' : '/api/register';
            const payload = isLoginMode ? { phone } : { name, phone };

            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();

                if (data.success) {
                    // Si connexion, le serveur renvoie le nom stock√© dans la DB
                    const finalName = data.name || name;
                    localStorage.setItem('zakaUser', finalName);
                    localStorage.setItem('zakaPhone', phone);
                    authOverlay.style.display = 'none';
                    alert(`Ravi de vous voir, ${finalName} !`);
                } else {
                    alert(isLoginMode ? "Num√©ro non reconnu. Veuillez vous inscrire." : "Erreur lors de l'enregistrement.");
                    btn.disabled = false;
                    btn.innerText = isLoginMode ? "Se connecter" : "Commencer";
                }
            } catch (err) {
                console.error(err);
                alert("Erreur de connexion au serveur.");
                btn.disabled = false;
            }
        });

        // --- LOGIQUE SIDEBAR ---
        const menuToggle = document.getElementById('mobile-menu');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');

        menuToggle.addEventListener('click', () => {
            menuToggle.classList.toggle('active');
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        });

        function closeMenu() {
            menuToggle.classList.remove('active');
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        }
    </script>
</body>
</html>